"use strict";function MediaPlayerService(){var e=this,t={},r=!1;this.player=function(t,r){return e[t]?r?void e.onPlayerReady(r,function(){return e[t](r)}):e.onReady(function(){return e[t]()}):console.error('Media Player: Method "'+t+'" does not exist.')},this.play=function(t){var r=e.getPlayer(t),i=r.source,n=r.player;n&&(e.isYouTube(i)&&n.playVideo(),e.isBrightcove(i)&&n.play())},this.pause=function(t){var r=e.getPlayer(t),i=r.source,n=r.player;n&&(e.isYouTube(i)&&n.pauseVideo(),e.isBrightcove(i)&&n.pause())},this.loop=function(t){var r=e.getPlayer(t),i=r.source,n=r.player;n&&(e.isYouTube(i)&&n.setLoop(!0),e.isBrightcove(i)&&n.loop(!0))},this.playInBackground=function(t){e.loop(t),e.mute(t),e.play(t)},this.pauseAll=function(){var t=e.getPlayers();t.length&&t.forEach(function(t){return e.pause(t.id)})},this.mute=function(t){var r=e.getPlayer(t),i=r.source,n=r.player;n&&(e.isYouTube(i)&&n.mute(),e.isBrightcove(i)&&n.muted(!0))},this.setTime=function(t,r){var i=e.getPlayer(t),n=i.source,o=i.player;o&&(e.isYouTube(n)&&o.seekTo(r),e.isBrightcove(n)&&o.currentTime(r))},this.reset=function(t){e.pause(t),e.setTime(t,0)},this.resetAll=function(){var t=e.getPlayers();t.length&&t.forEach(function(t){return e.reset(t.id)})},this.getPlayer=function(e){return t[e]||{}},this.getPlayers=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?t:Object.values(t)},this.isYouTube=function(e){var t="string"==typeof e?e:e.source;return"youtube"===t},this.isBrightcove=function(e){var t="string"==typeof e?e:e.source;return"brightcove"===t},this.onPlayerReady=function(e,r){if(t[e])return r();var i=setInterval(function(){if(t[e])return r(),clearInterval(i)},50)},this.onReady=function(e){if(r)return e();var t=setInterval(function(){if(r)return e(),clearInterval(t)},50)},this.onYouTubeAPIReady=function(e){if(window.YT&&window.YT.Player)return e();var t=setInterval(function(){if(window.YT&&window.YT.Player)return clearInterval(t),e()},50)},this.onBrightcoveAPIReady=function(e){if(window.videojs)return e();var t=setInterval(function(){if(window.videojs)return clearInterval(t),e()},50)},this.loadYouTubePlayer=function(e){function r(e){t[i]={id:i,source:"youtube",player:n}}var i=$(e).data("video-id");if(!t[i])var n=new window.YT.Player(e,{events:{onReady:r}})},this.loadBrightcovePlayer=function(e){var r=$(e).data("video-id");if(!t[r]){var i=window.videojs.getPlayer(e);i&&i.on("loadedmetadata",function(){t[r]={id:r,source:"brightcove",player:i}})}},this.loadPlayer=function(t){var r=$(t).data("video-source");r&&(e.isYouTube(r)&&e.onYouTubeAPIReady(function(){return e.loadYouTubePlayer(t)}),e.isBrightcove(r)&&e.onBrightcoveAPIReady(function(){return e.loadBrightcovePlayer(t)}))},this.loadPlayers=function(t){$(t).each(function(t,r){return e.loadPlayer(r)})},this.init=function(){e.loadPlayers("[data-video]"),r=!0},this.init()}window.MediaPlayer=new MediaPlayerService;